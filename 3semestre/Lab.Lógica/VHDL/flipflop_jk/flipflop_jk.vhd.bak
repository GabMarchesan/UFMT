library ieee;
use ieee.std_logic_1164.all;

entity flipflop_jk is 
	port(clk, reset, j, k: in std_logic;
							  q: out std_logic);
end flipflop_jk;

architecture synth of flipflop_jk is
	--Declaração de componentes reutilizáveis
	component ffd is
			port(clk, reset: in std_logic;
					  d: in std_logic;
					  q: out std_logic); 
	end component;
	
 -- armazena o valor que será armazenado no flip-flop JK.
  signal d_reg : std_logic;

begin

  d_ff_inst : ffd port map (
    clk => clk,
    d => d_reg,
    q => q
  );

  process (clk, reset)
  begin
    if reset = '1' then
      d_reg <= '0';
    elsif clk'event and clk = '1' then
      if j = '1' and k = '1' then
        d_reg <= not q;
      elsif j = '1' and k = '0' then
        d_reg <= '1';
      elsif j = '0' and k = '1' then
        d_reg <= '0';
      end if;
    end if;
  end process;

end synth;